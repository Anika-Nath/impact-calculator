<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Impact Calculator GUI</title>
  <style>
    body { font-family: Segoe UI, Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg,#667eea 0%,#764ba2 100%); margin:0; min-height:100vh; display:flex; justify-content:center; align-items:center; padding:20px; }
    .container { background:#fff; border-radius:15px; box-shadow:0 20px 40px rgba(0,0,0,.1); padding:40px; width:100%; max-width:500px; }
    h1 { text-align:center; color:#333; margin-bottom:30px; font-size:2.2em; font-weight:300; }
    .form-group { margin-bottom:20px; }
    label { display:block; margin-bottom:8px; font-weight:600; color:#555; }
    input[type="number"] { width:100%; padding:12px 15px; border:2px solid #e1e5e9; border-radius:8px; font-size:16px; box-sizing:border-box; }
    input[type="number"]:focus { outline:0; border-color:#667eea; box-shadow:0 0 0 3px rgba(102,126,234,.1); }
    .units { color:#888; font-size:.9em; margin-top:5px; }
    button { width:100%; padding:15px; background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); color:#fff; border:0; border-radius:8px; font-size:18px; font-weight:600; cursor:pointer; }
    .result { margin-top:25px; padding:15px; border-radius:8px; display:none; }
    .success { background:#d4edda; border:1px solid #c3e6cb; color:#155724; }
    .error { background:#f8d7da; border:1px solid #f5c6cb; color:#721c24; }
    .result-item { display:flex; justify-content:space-between; margin:6px 0; }
    .result-label { font-weight:600; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Impact Calculator</h1>

    <form id="impactForm">
      <div class="form-group">
        <label for="mass">Mass</label>
        <input type="number" id="mass" name="mass" step="0.01" required />
        <div class="units">kg</div>
      </div>

      <div class="form-group">
        <label for="speed">Speed</label>
        <input type="number" id="speed" name="speed" step="0.01" required />
        <div class="units">km/s</div>
      </div>

      <div class="form-group">
        <label for="height_of_burst">Height of Burst</label>
        <input type="number" id="height_of_burst" name="height_of_burst" step="0.01" required />
        <div class="units">km</div>
      </div>

      <div class="form-group">
        <label for="entry_angle">Entry Angle</label>
        <input type="number" id="entry_angle" name="entry_angle" step="0.01" min="0" max="90" required />
        <div class="units">degrees (0 to 90)</div>
      </div>

      <button type="submit">Calculate Impact</button>
    </form>

    <div id="result" class="result">
      <div id="resultMessage"></div>
      <div id="resultContent"></div>
    </div>
  </div>

  <script>
    document.getElementById('impactForm').addEventListener('submit', async function (e) {
      e.preventDefault();
      const formData = new FormData(this);
      const resultDiv = document.getElementById('result');
      const msg = document.getElementById('resultMessage');
      const content = document.getElementById('resultContent');

      resultDiv.style.display = 'block';
      resultDiv.className = 'result';
      msg.textContent = 'Calculating...';
      content.innerHTML = '';

      try {
        const res = await fetch('/calculate', { method: 'POST', body: formData });
        const data = await res.json();

        if (data.status === 'success') {
          resultDiv.classList.add('success');
          msg.textContent = data.message;
          content.innerHTML = `
            <div class="result-item"><span class="result-label">Mass:</span><span>${data.mass} kg</span></div>
            <div class="result-item"><span class="result-label">Speed:</span><span>${data.speed} km/s</span></div>
            <div class="result-item"><span class="result-label">Height of Burst:</span><span>${data.height_of_burst} km</span></div>
            <div class="result-item"><span class="result-label">Entry Angle:</span><span>${data.entry_angle}Â°</span></div>
          `;
        } else {
          resultDiv.classList.add('error');
          msg.textContent = data.message;
        }
      } catch (err) {
        resultDiv.classList.add('error');
        msg.textContent = 'An error occurred while processing the request.';
        console.error(err);
      }
    });
  </script>
</body>
</html>
